# aeroapi-go

A Go client library for the [FlightAware AeroAPI](https://www.flightaware.com/aeroapi/), auto-generated from the OpenAPI specification using [oapi-codegen](https://github.com/oapi-codegen/oapi-codegen).

- **Module path:** `github.com/bilte-co/aeroapi-go`
- **AeroAPI version:** 4.28.0

## Installation

```bash
go get github.com/bilte-co/aeroapi-go@latest
```

## Usage

```go
package main

import (
    "context"
    "fmt"
    "log"
    "net/http"

    client "github.com/bilte-co/aeroapi-go"
)

func main() {
    c, err := client.NewClientWithResponses(
        "https://aeroapi.flightaware.com/aeroapi",
        client.WithRequestEditorFn(func(ctx context.Context, req *http.Request) error {
            req.Header.Set("x-apikey", "YOUR_API_KEY")
            return nil
        }),
    )
    if err != nil {
        log.Fatal(err)
    }

    // Get flight information
    resp, err := c.GetFlightWithResponse(ctx, "UAL123", nil)
    if err != nil {
        log.Fatal(err)
    }

    // Check status code
    if resp.StatusCode() != http.StatusOK {
        log.Fatalf("API error: %s", resp.Status())
    }

    // Access response data (field name matches content-type from OpenAPI spec)
    data := resp.ApplicationjsonCharsetUTF8200
    if data == nil {
        log.Fatal("no data returned")
    }

    for _, flight := range data.Flights {
        fmt.Printf("Flight: %s -> %s\n",
            *flight.Origin.CodeIcao,
            *flight.Destination.CodeIcao,
        )
    }
}
```

> **Note:** The response field `ApplicationjsonCharsetUTF8200` is auto-generated by oapi-codegen from the API's content-type header (`application/json; charset=UTF-8`) and status code (`200`). While verbose, this is the standard pattern for typed responses.

## Compatibility

| aeroapi-go version | FlightAware AeroAPI version |
|--------------------|-----------------------------|
| v0.1.0             | 4.28.0                      |

## Development

### Prerequisites

- Go 1.24+
- [just](https://github.com/casey/just) (command runner)

### Commands

| Command        | Description                              |
|----------------|------------------------------------------|
| `just gen`     | Regenerate client from OpenAPI spec      |
| `just test`    | Run tests                                |
| `just lint`    | Run golangci-lint                        |
| `just sec`     | Run security checks (gosec)              |
| `just vuln`    | Run vulnerability checks (govulncheck)   |
| `just check`   | Run tests, lint, vuln (pre-release)      |
| `just release` | Tag a new release (e.g., `just release 0.1.0`) |

### Regenerating the Client

The client is generated from the FlightAware AeroAPI OpenAPI specification v4.28.0.

```bash
just gen
# or
go generate ./...
```

## License

See [LICENSE](LICENSE) for details.
